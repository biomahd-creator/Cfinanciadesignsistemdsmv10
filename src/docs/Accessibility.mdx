{/* docs/Accessibility.mdx */}
import { Meta } from '@storybook/blocks';

<Meta title="Docs/Accessibility" />

# Accessibility (A11y)

El DSM incluye componentes de accesibilidad y sigue las guias WCAG 2.1 AA.

## Componentes Dedicados

### SkipLink (`/components/accessibility/SkipLink.tsx`)
Enlace oculto que aparece con Tab para saltar al contenido principal. Imprescindible para navegacion con teclado.

### FocusTrap (`/components/accessibility/FocusTrap.tsx`)
Trampa de foco para modales y overlays. Mantiene el foco dentro del componente hasta que se cierre.

### LiveRegion (`/components/accessibility/LiveRegion.tsx`)
Region ARIA live para anunciar cambios dinamicos a lectores de pantalla. Soporta `polite` y `assertive`.

## Patrones A11y en el DSM

### Keyboard Navigation
- Todos los componentes interactivos son navegables con Tab
- Los Dialogs y Sheets usan FocusTrap automaticamente (via Radix)
- Los menus soportan flechas arriba/abajo y Enter/Escape

### ARIA Labels
- `aria-describedby={undefined}` en `DialogPrimitive.Content` (fix Radix warning)
- Labels obligatorios en todos los inputs via `<Label htmlFor={...}>`
- Badges usan `role="status"` cuando representan estados

### Color Contrast
- Todos los pares foreground/background cumplen ratio 4.5:1 (AA)
- Los tokens semanticos mantienen contraste en light y dark mode
- El addon `@storybook/addon-a11y` audita cada story automaticamente

### Motion & Animation
- Las animaciones respetan `prefers-reduced-motion`
- Los estados de loading usan `aria-busy="true"`
- Las transiciones de pagina son opcionales

## Testing

El addon **@storybook/addon-a11y** esta activo en cada story. En el panel "Accessibility" se puede ver:
- Violations (errores)
- Passes (aprobados)
- Incomplete (requiere revision manual)

## Checklist para Nuevos Componentes

- [ ] Navegable con teclado (Tab, Enter, Escape, flechas)
- [ ] ARIA labels en elementos interactivos
- [ ] Contraste de color >= 4.5:1
- [ ] Focus visible (`focus-visible:ring-2`)
- [ ] `prefers-reduced-motion` respetado
- [ ] Probado con lector de pantalla (VoiceOver/NVDA)
