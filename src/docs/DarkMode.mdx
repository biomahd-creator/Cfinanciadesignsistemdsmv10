{/* docs/DarkMode.mdx */}
import { Meta } from '@storybook/blocks';

<Meta title="Docs/Dark Mode" />

# Dark Mode

El DSM soporta modo oscuro completo usando la clase `.dark` en el elemento `<html>`.

## Como Funciona

1. **ThemeProvider** (`/components/ThemeProvider.tsx`) gestiona el estado del tema
2. La clase `.dark` se agrega al `<html>` element
3. Los tokens CSS en `.dark { }` sobreescriben los valores de `:root`
4. Tailwind v4 usa `dark:` prefix para clases condicionales

## Toggle en Storybook

En la toolbar de Storybook, el addon **@storybook/addon-themes** agrega un selector Light/Dark que aplica la clase `.dark` al iframe del preview.

## Patron de Tokens

```css
/* globals.css */
:root {
  --background: #ffffff;
  --foreground: #1C2D3A;
}

.dark {
  --background: #0f172a;
  --foreground: #f8fafc;
}

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
}
```

## Reglas para Nuevos Componentes

### Usar tokens semanticos
```jsx
{/* Correcto */}
<div className="bg-background text-foreground border-border" />

{/* Incorrecto */}
<div className="bg-white text-gray-900 border-gray-200" />
```

### Dark variants explicitos cuando se necesitan
```jsx
{/* Para colores que no son tokens */}
<div className="bg-green-50 dark:bg-green-500/10 text-green-600 dark:text-green-400" />
```

### Excepciones documentadas
Los siguientes archivos usan colores fijos intencionalmente:
- `code-block.tsx` — Syntax highlighting
- `ColorPresetButton.tsx` — Color previews
- `bg-white/10` | `bg-white/20` — Sobre fondos oscuros
- `FactoringKpiCard.tsx` — Hex por variante

## C-Financia Dark Mode

Las variables `--cfinancia-*` son canales RGB:
```css
:root {
  --cfinancia-accent: 222, 251, 73;
}
```

Uso en componentes:
```jsx
<div style={{ backgroundColor: `rgb(var(--cfinancia-accent))` }} />
```
